"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.registerGroupHandlers = registerGroupHandlers;
const types_1 = require("../types");
function registerGroupHandlers(ctx) {
    const { socket, emit, touchActivity } = ctx;
    socket.ev.on('groups.update', async () => {
        touchActivity();
        emit(types_1.WacapEventType.GROUP_UPDATE, {});
    });
    socket.ev.on('group-participants.update', async (update) => {
        touchActivity();
        emit(types_1.WacapEventType.GROUP_PARTICIPANTS_UPDATE, {
            groupId: update.id,
            participants: update.participants.map((p) => typeof p === 'string' ? p : p.id),
            action: update.action,
            author: update.author,
        });
    });
}
//# sourceMappingURL=group.handler.js.map