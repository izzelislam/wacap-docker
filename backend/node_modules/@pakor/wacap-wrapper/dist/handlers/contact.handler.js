"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.registerContactHandlers = registerContactHandlers;
const types_1 = require("../types");
function registerContactHandlers(ctx) {
    const { socket, storageAdapter, sessionId, emit, touchActivity } = ctx;
    socket.ev.on('contacts.update', async (updates) => {
        for (const contact of updates) {
            if (contact.id) {
                await storageAdapter.saveContact(sessionId, contact);
            }
        }
        touchActivity();
        emit(types_1.WacapEventType.CONTACT_UPDATE, {});
    });
}
//# sourceMappingURL=contact.handler.js.map